<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BookVerse - My Book List</title>
    <link rel="stylesheet" href="css/styles.css" />
</head>

<body>

    <h2>My Book List</h2>

    <!-- Logout Button -->
    <div style="margin-bottom: 10px;">
        <button id="logoutBtn" style="float: right;">Logout</button>
    </div>

    <!-- Search & Add -->
    <div style="clear: both;">
        <input type="text" id="searchInput" placeholder="Search by title or author..."
            style="margin-bottom: 10px; padding: 5px; width: 300px;" />
        <button id="addBookBtn">Add New Book</button>
    </div>

    <!-- Table -->
    <table id="booksTable" border="1" cellpadding="5" cellspacing="0" style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr>
                <th data-sort="title" style="cursor: pointer;">Title &#x25B2;&#x25BC;</th>
                <th data-sort="author" style="cursor: pointer;">Author &#x25B2;&#x25BC;</th>
                <th data-sort="status" style="cursor: pointer;">Status &#x25B2;&#x25BC;</th>
                <th data-sort="rating" style="cursor: pointer;">Rating &#x25B2;&#x25BC;</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="booksTbody">
        </tbody>
    </table>

    <!-- Message & Modals -->
    <div id="message" style="margin-top: 10px;"></div>
    <div id="modalContainer">
        <div id="bookModal" class="modal"
            style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); align-items:center; justify-content:center;">
            <div style="background:white; padding:20px; border-radius:8px; width:300px; position:relative;">
                <h3 id="modalTitle">Add Book</h3>
                <form id="bookForm">
                    <input type="text" name="title" id="bookTitle" placeholder="Title" required
                        style="width:100%; margin-bottom:10px;" />
                    <input type="text" name="author" id="bookAuthor" placeholder="Author" required
                        style="width:100%; margin-bottom:10px;" />
                    <select name="status" id="bookStatus" required style="width:100%; margin-bottom:10px;">
                        <option value="Want to Read">Want to Read</option>
                        <option value="Reading">Reading</option>
                        <option value="Finished">Finished</option>
                    </select>
                    <input type="number" name="rating" id="bookRating" placeholder="Rating (1-5)" min="1" max="5"
                        style="width:100%; margin-bottom:10px;" />
                    <textarea name="notes" id="bookNotes" placeholder="Notes"
                        style="width:100%; margin-bottom:10px;"></textarea>

                    <button type="submit">Save</button>
                    <button type="button" id="closeModalBtn" style="margin-left: 10px;">Cancel</button>
                </form>
            </div>
        </div>
    </div>

    <div id="confirmDeleteModal" class="modal" style="display: none;">
        <div class="modal-content">
            <p>Are you sure you want to delete this book?</p>
            <div style="margin-top: 15px; text-align: right;">
                <button id="cancelDeleteBtn">Cancel</button>
                <button id="confirmDeleteBtn">Yes, Delete</button>
            </div>
        </div>
    </div>

    <!-- Auto-redirect if not logged in -->
    <script>
        if (!localStorage.getItem('token')) {
            window.location.href = 'index.html';
        }
    </script>

    <script src="js/main.js" defer></script>

</body>

</html>